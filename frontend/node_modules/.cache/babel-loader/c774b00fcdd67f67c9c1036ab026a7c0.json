{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexm\\\\VsCodeProjects\\\\School Projects\\\\CEN\\\\SWE semester project\\\\SWE-OnTask\\\\frontend\\\\src\\\\context\\\\ClassContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from 'react';\nimport { useAuthContext } from '../hooks/useAuthContext'; // Assuming you are storing user data here\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ClassesContext = /*#__PURE__*/createContext();\nexport const ClassesReducer = (state, action) => {\n  switch (action.type) {\n    case 'CREATE_CLASS':\n      return { ...state,\n        classroom: action.payload\n      };\n    // Store the classroom in the context\n\n    default:\n      return state;\n  }\n};\n_c = ClassesReducer;\nexport const ClassesContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    user\n  } = useAuthContext(); // Access user context (assuming user data is stored here)\n\n  const [state, dispatch] = useReducer(ClassesReducer, {\n    classroom: null\n  });\n  useEffect(() => {\n    // Only fetch the classroom if user is defined and classroomId exists\n    const fetchClassroom = async classroomId => {\n      try {\n        console.log('Fetching classroom for ID:', classroomId);\n        const response = await fetch(`/api/classes/${user.code}`);\n\n        if (!response.ok) {\n          throw new Error(`Failed to fetch classroom: ${response.statusText}`);\n        }\n\n        const classroom = await response.json();\n        console.log('Fetched classroom:', classroom);\n        dispatch({\n          type: 'CREATE_CLASS',\n          payload: classroom\n        });\n      } catch (error) {\n        console.error('Error fetching classroom:', error.message);\n      }\n    };\n\n    if (user && user.classroom) {\n      fetchClassroom(user.classroom);\n    } else {\n      console.log('No classroom ID found in user data.');\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(ClassesContext.Provider, {\n    value: { ...state,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ClassesContextProvider, \"B88pDneXfnar/m3MUkQQH6BJ6RE=\", false, function () {\n  return [useAuthContext];\n});\n\n_c2 = ClassesContextProvider;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ClassesReducer\");\n$RefreshReg$(_c2, \"ClassesContextProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","useAuthContext","ClassesContext","ClassesReducer","state","action","type","classroom","payload","ClassesContextProvider","children","user","dispatch","fetchClassroom","classroomId","console","log","response","fetch","code","ok","Error","statusText","json","error","message"],"sources":["C:/Users/alexm/VsCodeProjects/School Projects/CEN/SWE semester project/SWE-OnTask/frontend/src/context/ClassContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from 'react';\r\nimport { useAuthContext } from '../hooks/useAuthContext'; // Assuming you are storing user data here\r\n\r\nexport const ClassesContext = createContext();\r\n\r\nexport const ClassesReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'CREATE_CLASS':\r\n            return { ...state, classroom: action.payload }; // Store the classroom in the context\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const ClassesContextProvider = ({ children }) => {\r\n    const { user } = useAuthContext(); // Access user context (assuming user data is stored here)\r\n    const [state, dispatch] = useReducer(ClassesReducer, {\r\n        classroom: null,\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Only fetch the classroom if user is defined and classroomId exists\r\n        const fetchClassroom = async (classroomId) => {\r\n            try {\r\n                console.log('Fetching classroom for ID:', classroomId);\r\n                const response = await fetch(`/api/classes/${user.code}`);\r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch classroom: ${response.statusText}`);\r\n                }\r\n                const classroom = await response.json();\r\n                console.log('Fetched classroom:', classroom);\r\n                dispatch({ type: 'CREATE_CLASS', payload: classroom });\r\n            } catch (error) {\r\n                console.error('Error fetching classroom:', error.message);\r\n            }\r\n        };\r\n\r\n        if (user && user.classroom) {\r\n            fetchClassroom(user.classroom);\r\n        } else {\r\n            console.log('No classroom ID found in user data.');\r\n        }\r\n    }, [user]);\r\n\r\n   \r\n\r\n    return (\r\n        <ClassesContext.Provider value={{ ...state, dispatch }}>\r\n            {children}\r\n        </ClassesContext.Provider>\r\n    );\r\n};\r\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,cAAT,QAA+B,yBAA/B,C,CAA0D;;;AAE1D,OAAO,MAAMC,cAAc,gBAAGJ,aAAa,EAApC;AAEP,OAAO,MAAMK,cAAc,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;EAC7C,QAAQA,MAAM,CAACC,IAAf;IACI,KAAK,cAAL;MACI,OAAO,EAAE,GAAGF,KAAL;QAAYG,SAAS,EAAEF,MAAM,CAACG;MAA9B,CAAP;IAAgD;;IACpD;MACI,OAAOJ,KAAP;EAJR;AAMH,CAPM;KAAMD,c;AASb,OAAO,MAAMM,sBAAsB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACpD,MAAM;IAAEC;EAAF,IAAWV,cAAc,EAA/B,CADoD,CACjB;;EACnC,MAAM,CAACG,KAAD,EAAQQ,QAAR,IAAoBb,UAAU,CAACI,cAAD,EAAiB;IACjDI,SAAS,EAAE;EADsC,CAAjB,CAApC;EAIAP,SAAS,CAAC,MAAM;IACZ;IACA,MAAMa,cAAc,GAAG,MAAOC,WAAP,IAAuB;MAC1C,IAAI;QACAC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CF,WAA1C;QACA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAE,gBAAeP,IAAI,CAACQ,IAAK,EAA3B,CAA5B;;QACA,IAAI,CAACF,QAAQ,CAACG,EAAd,EAAkB;UACd,MAAM,IAAIC,KAAJ,CAAW,8BAA6BJ,QAAQ,CAACK,UAAW,EAA5D,CAAN;QACH;;QACD,MAAMf,SAAS,GAAG,MAAMU,QAAQ,CAACM,IAAT,EAAxB;QACAR,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCT,SAAlC;QACAK,QAAQ,CAAC;UAAEN,IAAI,EAAE,cAAR;UAAwBE,OAAO,EAAED;QAAjC,CAAD,CAAR;MACH,CATD,CASE,OAAOiB,KAAP,EAAc;QACZT,OAAO,CAACS,KAAR,CAAc,2BAAd,EAA2CA,KAAK,CAACC,OAAjD;MACH;IACJ,CAbD;;IAeA,IAAId,IAAI,IAAIA,IAAI,CAACJ,SAAjB,EAA4B;MACxBM,cAAc,CAACF,IAAI,CAACJ,SAAN,CAAd;IACH,CAFD,MAEO;MACHQ,OAAO,CAACC,GAAR,CAAY,qCAAZ;IACH;EACJ,CAtBQ,EAsBN,CAACL,IAAD,CAtBM,CAAT;EA0BA,oBACI,QAAC,cAAD,CAAgB,QAAhB;IAAyB,KAAK,EAAE,EAAE,GAAGP,KAAL;MAAYQ;IAAZ,CAAhC;IAAA,UACKF;EADL;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH,CArCM;;GAAMD,sB;UACQR,c;;;MADRQ,sB"},"metadata":{},"sourceType":"module"}